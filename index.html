<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Belajar Gamelan Interaktif</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<style>
body {
    margin: 0;
    overflow: hidden;
    background: #111;
    color: white;
    font-family: Arial, sans-serif;
}

#canvas-container {
    position: absolute;
    width: 100%;
    height: 100%;
}

.controls {
    position: absolute;
    bottom: 20px;
    width: 100%;
    text-align: center;
}

button {
    padding: 12px 20px;
    margin: 5px;
    border: none;
    border-radius: 25px;
    background: gold;
    font-weight: bold;
    cursor: pointer;
}

#loading {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}
</style>
</head>

<body>

<div id="loading">Memuat 3D...</div>
<div id="canvas-container"></div>

<div class="controls">
    <button onclick="playGong()">ðŸ”´ Mainkan Gong</button>
    <button onclick="showEnergy()">âš¡ Lihat Energi</button>
    <button onclick="resetScene()">ðŸ”„ Reset</button>
</div>

<script>

// ====== THREE JS SETUP ======
const scene = new THREE.Scene();

const camera = new THREE.PerspectiveCamera(
    75,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
);

const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.getElementById("canvas-container").appendChild(renderer.domElement);

// LIGHTING (lebih terang supaya tidak gelap)
const ambient = new THREE.AmbientLight(0xffffff, 1);
scene.add(ambient);

const light = new THREE.PointLight(0xffffff, 1);
light.position.set(10, 10, 10);
scene.add(light);

// GONG (Cylinder)
const geometry = new THREE.CylinderGeometry(3, 3, 0.5, 32);
const material = new THREE.MeshStandardMaterial({
    color: 0xd4af37,
    metalness: 0.8,
    roughness: 0.3
});

const gong = new THREE.Mesh(geometry, material);
gong.rotation.x = Math.PI / 2;
scene.add(gong);

camera.position.z = 8;
camera.position.y = 2;
camera.lookAt(0,0,0);

// ===== ANIMASI =====
let vibrating = false;

function animate() {
    requestAnimationFrame(animate);

    if (vibrating) {
        const t = Date.now() * 0.05;
        gong.position.x = Math.sin(t) * 0.1;
    } else {
        gong.position.x = 0;
    }

    gong.rotation.z += 0.003; // biar hidup

    renderer.render(scene, camera);
}

animate();

document.getElementById("loading").style.display = "none";

// ===== INTERAKSI =====

function playGong() {
    vibrating = true;

    // suara text to speech
    if ("speechSynthesis" in window) {
        const u = new SpeechSynthesisUtterance("Ini adalah Gong. Suara dihasilkan karena getaran.");
        u.lang = "id-ID";
        speechSynthesis.speak(u);
    }

    setTimeout(() => {
        vibrating = false;
    }, 1000);
}

function showEnergy() {
    const original = gong.material.color.getHex();
    gong.material.color.setHex(0xff0000);
    gong.scale.set(1.3,1.3,1.3);

    setTimeout(()=>{
        gong.material.color.setHex(original);
        gong.scale.set(1,1,1);
    },800);
}

function resetScene() {
    vibrating = false;
    gong.scale.set(1,1,1);
    camera.position.set(0,2,8);
}

</script>

</body>
</html>
